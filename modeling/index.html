<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content><link rel="shortcut icon" href=https://aristanetworks.github.io/cloudvision-apis//images/favicon.ico type=image/x-icon><title>Modeling :: Arista Networks FMP APIs</title><link href=/cloudvision-apis/css/nucleus.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/fontawesome-all.min.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/hybrid.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/featherlight.min.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/perfect-scrollbar.min.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/auto-complete.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/atom-one-dark-reasonable.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/theme.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/hugo-theme.css?1675976158 rel=stylesheet><link href=/cloudvision-apis/css/theme-arista.css?1675976158 rel=stylesheet><script src=/cloudvision-apis/js/jquery-3.3.1.min.js?1675976158></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/cloudvision-apis/modeling/><nav id=sidebar><div id=header-wrapper><div id=header><a href=https://aristanetworks.github.io/cloudvision-apis/><img src=https://aristanetworks.github.io/cloudvision-apis//images/logo_arista.png alt></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/cloudvision-apis/js/lunr.min.js?1675976158></script>
<script type=text/javascript src=/cloudvision-apis/js/auto-complete.js?1675976158></script>
<script type=text/javascript>var baseurl="https://aristanetworks.github.io/cloudvision-apis/"</script><script type=text/javascript src=/cloudvision-apis/js/search.js?1675976158></script></div><div class=highlightable><ul class=topics><li data-nav-id=/cloudvision-apis/modeling/ title=Modeling class="dd-item
active"><a href=/cloudvision-apis/modeling/>Modeling</a></li><li data-nav-id=/cloudvision-apis/rpcs/ title="Uniform RPCs" class=dd-item><a href=/cloudvision-apis/rpcs/>Uniform RPCs</a><ul><li data-nav-id=/cloudvision-apis/rpcs/errors/ title="Error Handling" class=dd-item><a href=/cloudvision-apis/rpcs/errors/><b>- </b>Error Handling</a></li><li data-nav-id=/cloudvision-apis/rpcs/filtering/ title=Filtering class=dd-item><a href=/cloudvision-apis/rpcs/filtering/><b>- </b>Filtering</a></li><li data-nav-id=/cloudvision-apis/rpcs/getone/ title=GetOne class=dd-item><a href=/cloudvision-apis/rpcs/getone/><b>a. </b>GetOne</a></li><li data-nav-id=/cloudvision-apis/rpcs/getall/ title=GetAll class=dd-item><a href=/cloudvision-apis/rpcs/getall/><b>b. </b>GetAll</a></li><li data-nav-id=/cloudvision-apis/rpcs/subscribe/ title=Subscribe class=dd-item><a href=/cloudvision-apis/rpcs/subscribe/><b>c. </b>Subscribe</a></li><li data-nav-id=/cloudvision-apis/rpcs/set/ title=Set class=dd-item><a href=/cloudvision-apis/rpcs/set/><b>d. </b>Set</a></li><li data-nav-id=/cloudvision-apis/rpcs/delete/ title=Delete class=dd-item><a href=/cloudvision-apis/rpcs/delete/><b>e. </b>Delete</a></li></ul></li><li data-nav-id=/cloudvision-apis/connecting/ title=Connecting class=dd-item><a href=/cloudvision-apis/connecting/>Connecting</a></li><li data-nav-id=/cloudvision-apis/clients/ title=Clients class=dd-item><a href=/cloudvision-apis/clients/>Clients</a><ul><li data-nav-id=/cloudvision-apis/clients/existing/ title="Existing Clients" class=dd-item><a href=/cloudvision-apis/clients/existing/>Existing Clients</a></li><li data-nav-id=/cloudvision-apis/clients/creating/ title="Creating a Client" class=dd-item><a href=/cloudvision-apis/clients/creating/>Creating a Client</a></li></ul></li><li data-nav-id=/cloudvision-apis/examples/ title=Examples class=dd-item><a href=/cloudvision-apis/examples/>Examples</a><ul><li data-nav-id=/cloudvision-apis/examples/grpc/ title=gRPC class=dd-item><a href=/cloudvision-apis/examples/grpc/>gRPC</a></li><li data-nav-id=/cloudvision-apis/examples/rest/ title="REST API Examples" class=dd-item><a href=/cloudvision-apis/examples/rest/>REST API Examples</a><ul><li data-nav-id=/cloudvision-apis/examples/rest/bugexposure/ title=Bugexposure class=dd-item><a href=/cloudvision-apis/examples/rest/bugexposure/>Bugexposure</a></li><li data-nav-id=/cloudvision-apis/examples/rest/changecontrol/ title="Change Control" class=dd-item><a href=/cloudvision-apis/examples/rest/changecontrol/>Change Control</a></li><li data-nav-id=/cloudvision-apis/examples/rest/dashboard/ title=Dashboard class=dd-item><a href=/cloudvision-apis/examples/rest/dashboard/>Dashboard</a></li><li data-nav-id=/cloudvision-apis/examples/rest/endpointlocation/ title=Endpointlocation class=dd-item><a href=/cloudvision-apis/examples/rest/endpointlocation/>Endpointlocation</a></li><li data-nav-id=/cloudvision-apis/examples/rest/events/ title=Events class=dd-item><a href=/cloudvision-apis/examples/rest/events/>Events</a></li><li data-nav-id=/cloudvision-apis/examples/rest/inventory/ title=Inventory class=dd-item><a href=/cloudvision-apis/examples/rest/inventory/>Inventory</a></li><li data-nav-id=/cloudvision-apis/examples/rest/lifecycle/ title=Lifecycle class=dd-item><a href=/cloudvision-apis/examples/rest/lifecycle/>Lifecycle</a></li><li data-nav-id=/cloudvision-apis/examples/rest/studios-and-workspaces/ title="Studios and Workspaces" class=dd-item><a href=/cloudvision-apis/examples/rest/studios-and-workspaces/>Studios and Workspaces</a></li><li data-nav-id=/cloudvision-apis/examples/rest/tag/ title=Tags class=dd-item><a href=/cloudvision-apis/examples/rest/tag/>Tags</a></li></ul></li></ul></li><li data-nav-id=/cloudvision-apis/models/ title=Models class=dd-item><a href=/cloudvision-apis/models/>Models</a><ul><li data-nav-id=/cloudvision-apis/models/changecontrol.v1/ title=changecontrol.v1 class=dd-item><a href=/cloudvision-apis/models/changecontrol.v1/>changecontrol.v1</a></li><li data-nav-id=/cloudvision-apis/models/configstatus.v1/ title=configstatus.v1 class=dd-item><a href=/cloudvision-apis/models/configstatus.v1/>configstatus.v1</a></li><li data-nav-id=/cloudvision-apis/models/dashboard.v1/ title=dashboard.v1 class=dd-item><a href=/cloudvision-apis/models/dashboard.v1/>dashboard.v1</a></li><li data-nav-id=/cloudvision-apis/models/endpointlocation.v1/ title=endpointlocation.v1 class=dd-item><a href=/cloudvision-apis/models/endpointlocation.v1/>endpointlocation.v1</a></li><li data-nav-id=/cloudvision-apis/models/event.v1/ title=event.v1 class=dd-item><a href=/cloudvision-apis/models/event.v1/>event.v1</a></li><li data-nav-id=/cloudvision-apis/models/identityprovider.v1/ title=identityprovider.v1 class=dd-item><a href=/cloudvision-apis/models/identityprovider.v1/>identityprovider.v1</a></li><li data-nav-id=/cloudvision-apis/models/inventory.v1/ title=inventory.v1 class=dd-item><a href=/cloudvision-apis/models/inventory.v1/>inventory.v1</a></li><li data-nav-id=/cloudvision-apis/models/redirector.v1/ title=redirector.v1 class=dd-item><a href=/cloudvision-apis/models/redirector.v1/>redirector.v1</a></li><li data-nav-id=/cloudvision-apis/models/studio.v1/ title=studio.v1 class=dd-item><a href=/cloudvision-apis/models/studio.v1/>studio.v1</a></li><li data-nav-id=/cloudvision-apis/models/tag.v1/ title=tag.v1 class=dd-item><a href=/cloudvision-apis/models/tag.v1/>tag.v1</a></li><li data-nav-id=/cloudvision-apis/models/tag.v2/ title=tag.v2 class=dd-item><a href=/cloudvision-apis/models/tag.v2/>tag.v2</a></li><li data-nav-id=/cloudvision-apis/models/workspace.v1/ title=workspace.v1 class=dd-item><a href=/cloudvision-apis/models/workspace.v1/>workspace.v1</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/aristanetworks/cloudvision-apis><i class='fab fa-github'></i> Github</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/cloudvision-apis/></a> > Modeling</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#config-models>Config Models</a></li><li><a href=#state-models>State Models</a></li><li><a href=#high-level-config-state-flow>High Level Config-State Flow</a></li><li><a href=#nullable-types>Nullable Types</a></li><li><a href=#keys>Keys</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Modeling</h1><p>Resources are modeled in <a href=https://developers.google.com/protocol-buffers>Protobuf</a> and accessed over <a href=https://grpc.io/>gRPC</a> with a standardized set of RPCs (discussed in later sections). These models are divided into two types:</p><ul><li><strong>config</strong>: models which allow user-modification, exposing modifiable/tunable options.</li><li><strong>state</strong>: models which expose read-only operational and/or derived state based on <em>config</em> data.</li></ul><h2 id=config-models>Config Models</h2><p>Config models describe the user&rsquo;s interaction with the system. Fields in these models are populated by the user (or by defaults).</p><p>Config models are read-writeable, meaning their APIs expose both read and write methods. The Protobuf message extension <code>fmp.model = "rw"</code> denotes that a given model is used as <em>config</em> and the generated RPCs will expose both read and write method sets.</p><h2 id=state-models>State Models</h2><p>State models describe the operational state of the system. Fields in these models are populated by the system and are not modifiable (except through the relevant <em>config</em> model).</p><p>State models only have read methods defined and are denoted with the Protobuf message extension <code>fmp.model = "ro"</code>.</p><p>While not required, <em>state</em> models are allowed to &ldquo;echo&rdquo; the associated <em>config</em> model for convenience of the user. You should check the relevant model(s) before expecting this behaviour, however.</p><h2 id=high-level-config-state-flow>High Level Config-State Flow</h2><p>Below is a diagram explaining the data flow from writing a Config to the system creating/updating State.
<em>Typically</em>, this process is asynchronous and the client will receive a response to the <code>Set</code> request before
the state is readable. Verification and durably storing the config are the only gating requirements to responding to
the Config write-request.</p><p>While the config request is an input to deriving the state, there are other (possible) inputs into state:</p><ul><li>non-configurable on-device settings or data (ex: device boot time)</li><li>CloudVision configuration (ex: default user permissions)</li><li>related config/state models (if noted in documentation)</li><li>etc</li></ul><p>Subscribing to State (ideally, with a filter) allows the client to wait for any asynchronous processing.</p><p><img src=/cloudvision-apis/images/config-state-flow.svg alt="State-Config Data Flow"></p><p>All responses from <a href=/cloudvision-apis/rpcs/>RPCs</a> include a timestamp. This timestamp should be viewed as the time at
which the system durably stored an action (whether config or state). Thus, all state requests will return a
timestamp >= than that of the config that initiated the action.</p><h2 id=nullable-types>Nullable Types</h2><p>To make partial updates (both by users into the system as well as updates from the system) possible all primitive fields, maps, and repeated fields are wrapped in nullable messages. This nullability allows both the user and the system to differentiate between unset and zero-valued fields.</p><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>Nullability</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e>// This value will contain &#34;&#34; when not set by the user/system.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// It is not possible to know whether &#34;&#34; is the intended value, or simply omitted.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>string</span> unwrapped_string <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e>// This value will contain null when not set by the user/system.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// When the wrapper message is non-null, an empty string (&#34;&#34;) has
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// the context of being intentionally set.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    google.protobuf.StringValue wrapped_string <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>A list of the available wrapper types can be seen <a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf>here</a>, though models may define their own for maps or repeated (array) fields.</p><h2 id=keys>Keys</h2><p>All models (whether config or state) contain a <em>key</em> message.</p><p>This key contains the minimal set of data needed to uniquely identify a given model entity. Model keys may be as simple as a single string (say, a name) or as complex as containing references to a datacenter, device, interface, or any combination of them. The complexity of the key depends entirely on the model at hand.</p><p>Messages used for keys are denoted in protobuf with the extension: <code>fmp.model_key = true</code>.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/cloudvision-apis/ title><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/cloudvision-apis/rpcs/ title="Uniform RPCs" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/cloudvision-apis/js/clipboard.min.js?1675976158></script>
<script src=/cloudvision-apis/js/perfect-scrollbar.min.js?1675976158></script>
<script src=/cloudvision-apis/js/perfect-scrollbar.jquery.min.js?1675976158></script>
<script src=/cloudvision-apis/js/jquery.sticky.js?1675976158></script>
<script src=/cloudvision-apis/js/featherlight.min.js?1675976158></script>
<script src=/cloudvision-apis/js/highlight.pack.js?1675976158></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/cloudvision-apis/js/modernizr.custom-3.6.0.js?1675976158></script>
<script src=/cloudvision-apis/js/learn.js?1675976158></script>
<script src=/cloudvision-apis/js/hugo-learn.js?1675976158></script>
<link href=/cloudvision-apis/mermaid/mermaid.css?1675976158 rel=stylesheet><script src=/cloudvision-apis/mermaid/mermaid.js?1675976158></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>