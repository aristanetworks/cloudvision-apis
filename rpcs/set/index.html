<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.3"><meta name=description content><link rel="shortcut icon" href=https://aristanetworks.github.io/cloudvision-apis//images/favicon.ico type=image/x-icon><title>Set :: Arista Networks FMP APIs</title><link href=/cloudvision-apis/css/nucleus.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/fontawesome-all.min.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/hybrid.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/featherlight.min.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/perfect-scrollbar.min.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/auto-complete.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/atom-one-dark-reasonable.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/theme.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/hugo-theme.css?1597174942 rel=stylesheet><link href=/cloudvision-apis/css/theme-arista.css?1597174942 rel=stylesheet><script src=/cloudvision-apis/js/jquery-3.3.1.min.js?1597174942></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/cloudvision-apis/rpcs/set/><nav id=sidebar><div id=header-wrapper><div id=header><a href=https://aristanetworks.github.io/cloudvision-apis/><img src=https://aristanetworks.github.io/cloudvision-apis//images/logo_arista.png alt></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/cloudvision-apis/js/lunr.min.js?1597174942></script><script type=text/javascript src=/cloudvision-apis/js/auto-complete.js?1597174942></script><script type=text/javascript>var baseurl="https:\/\/aristanetworks.github.io\/cloudvision-apis\/";</script><script type=text/javascript src=/cloudvision-apis/js/search.js?1597174942></script></div><div class=highlightable><ul class=topics><li data-nav-id=/cloudvision-apis/modeling/ title=Modeling class=dd-item><a href=/cloudvision-apis/modeling/>Modeling</a></li><li data-nav-id=/cloudvision-apis/rpcs/ title="Uniform RPCs" class="dd-item
parent"><a href=/cloudvision-apis/rpcs/>Uniform RPCs</a><ul><li data-nav-id=/cloudvision-apis/rpcs/errors/ title="Error Handling" class=dd-item><a href=/cloudvision-apis/rpcs/errors/><b>- </b>Error Handling</a></li><li data-nav-id=/cloudvision-apis/rpcs/filtering/ title=Filtering class=dd-item><a href=/cloudvision-apis/rpcs/filtering/><b>- </b>Filtering</a></li><li data-nav-id=/cloudvision-apis/rpcs/getone/ title=GetOne class=dd-item><a href=/cloudvision-apis/rpcs/getone/><b>a. </b>GetOne</a></li><li data-nav-id=/cloudvision-apis/rpcs/getall/ title=GetAll class=dd-item><a href=/cloudvision-apis/rpcs/getall/><b>b. </b>GetAll</a></li><li data-nav-id=/cloudvision-apis/rpcs/subscribe/ title=Subscribe class=dd-item><a href=/cloudvision-apis/rpcs/subscribe/><b>c. </b>Subscribe</a></li><li data-nav-id=/cloudvision-apis/rpcs/set/ title=Set class="dd-item active"><a href=/cloudvision-apis/rpcs/set/><b>d. </b>Set</a></li><li data-nav-id=/cloudvision-apis/rpcs/delete/ title=Delete class=dd-item><a href=/cloudvision-apis/rpcs/delete/><b>e. </b>Delete</a></li></ul></li><li data-nav-id=/cloudvision-apis/connecting/ title=Connecting class=dd-item><a href=/cloudvision-apis/connecting/>Connecting</a></li><li data-nav-id=/cloudvision-apis/clients/ title=Clients class=dd-item><a href=/cloudvision-apis/clients/>Clients</a><ul><li data-nav-id=/cloudvision-apis/clients/existing/ title="Existing Clients" class=dd-item><a href=/cloudvision-apis/clients/existing/>Existing Clients</a></li><li data-nav-id=/cloudvision-apis/clients/creating/ title="Creating a Client" class=dd-item><a href=/cloudvision-apis/clients/creating/>Creating a Client</a></li></ul></li><li data-nav-id=/cloudvision-apis/models/ title=Models class=dd-item><a href=/cloudvision-apis/models/>Models</a><ul><li data-nav-id=/cloudvision-apis/models/event.v1/ title=event.v1 class=dd-item><a href=/cloudvision-apis/models/event.v1/>event.v1</a></li><li data-nav-id=/cloudvision-apis/models/inventory.v1/ title=inventory.v1 class=dd-item><a href=/cloudvision-apis/models/inventory.v1/>inventory.v1</a></li><li data-nav-id=/cloudvision-apis/models/tag.v1/ title=tag.v1 class=dd-item><a href=/cloudvision-apis/models/tag.v1/>tag.v1</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/aristanetworks/cloudvision-apis><i class="fab fa-github"></i>Github</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/cloudvision-apis/></a>> <a href=/cloudvision-apis/rpcs/>Uniform RPCs</a> > Set</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#updating-maps>Updating maps</a></li><li><a href=#updating-repeated-fields>Updating repeated fields</a></li><li><a href=#updating-subresources>Updating subresources</a></li></ul></li><li><a href=#example-update>Example: Update</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Set</h1><p><code>Set</code> updates a resource. Updates can be whole or partial (see: nullable fields) using only fields populated in the request.</p><div class="notices note"><p>The <code>Key</code> field is required to be fully-specified because <code>Set</code> needs to identify exactly-one
resource to delete.</p></div><div class="notices note"><p>The endpoint returns the time the <code>Set</code> becomes effective internally and the service&rsquo;s known-state of the resource.</p></div><p>A <code>*SetResponse</code> will contain an &ldquo;echo&rdquo; of the resource. This echo will be the original update-request at a minimum, and may include more data.This allows services to do fast, write-only, updates to internal storage. If the service needs to query existing state first then more data can be provided to the client. If you need a full model after a <code>Set</code> operation, you can issue a <code>GetOne</code> with the returned <code>time</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=color:#66d9ef>rpc</span> Set (ExampleConfigSetRequest) <span style=color:#66d9ef>returns</span> (ExampleSetResponse);<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h4 id=request-type>Request Type</h4><p>The generated request for a model (<code>ExampleConfig</code>, here) looks like so:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>ExampleConfigSetRequest</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#75715e>// ExampleConfig carries the value to set into the datastore.
</span><span style=color:#75715e></span>  ExampleConfig value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>};<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h4 id=response-type>Response Type</h4><p>The generated response for a model (<code>ExampleConfig</code>, here) looks like so:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>ExampleConfigSetResponse</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  ExampleConfig value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#75715e>// Time indicates the (UTC) timestamp at which the system recognizes the
</span><span style=color:#75715e></span>  <span style=color:#75715e>// creation. The only guarantees made about this timestamp are:
</span><span style=color:#75715e></span>  <span style=color:#75715e>//
</span><span style=color:#75715e></span>  <span style=color:#75715e>//    - it is after the time the request was received
</span><span style=color:#75715e></span>  <span style=color:#75715e>//    - a time-ranged query with StartTime==CreatedAt will include this instance.
</span><span style=color:#75715e></span>  <span style=color:#75715e>//
</span><span style=color:#75715e></span>  google.protobuf.Timestamp time <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>};<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h3 id=updating-maps>Updating maps</h3><p>Set maps are merged with the existing map.</p><p>To delete all of the values in a map, set the wrapper message of the map but leave the map itself empty.</p><h3 id=updating-repeated-fields>Updating repeated fields</h3><p>Set <code>repeated</code> fields replace the existing array. For example:</p><pre><code>t0:
    existing state: ['a', 'b', 'c']
t1:
    existing state: ['a', 'b', 'c']
    set request: ['a', 'q', 'z']
t2:
    existing state: ['a', 'q', 'z']
</code></pre><p>To delete all of the values in a <code>repeated</code> field, set the wrapper message of the <code>repeated</code> and leave the <code>repeated</code> empty.</p><h3 id=updating-subresources>Updating subresources</h3><p>Subresources are resources that are a child of another resource. A collection of subresources with compound keys is represented by a <code>repeated</code> field, though this collection should be treated as unordered and uses the same update semantics as maps (tuple keys are not allowed in protobuf maps). If multiple subresources with the same key are specified, the last one in the repeated ordering is assumed to be value.</p><h2 id=example-update>Example: Update</h2><p>Given an example proto:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf>syntax <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;proto3&#34;</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;google/protobuf/wrappers.proto&#34;</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>MapValue</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  google.protobuf.StringValue string_val <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  google.protobuf.Int64Value int_val <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>MapWrapper</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  map&lt;<span style=color:#66d9ef>string</span>, MapValue&gt; map <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>RepeatedWrapper</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>repeated</span> <span style=color:#66d9ef>string</span> <span style=color:#66d9ef>repeated</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>ExampleModel</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  google.protobuf.StringValue string_val <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  google.protobuf.Int64Value int_val <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  RepeatedWrapper <span style=color:#66d9ef>repeated</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  MapWrapper map <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>And a model:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>string_val {
  value: <span style=color:#e6db74>&#34;one&#34;</span>
}
int_val {
  value: <span style=color:#ae81ff>2</span>
}
repeated {
  repeated: <span style=color:#e6db74>&#34;five&#34;</span>
  repeated: <span style=color:#e6db74>&#34;six&#34;</span>
}
map {
  map {
    key: <span style=color:#e6db74>&#34;four&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;red&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>45</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;three&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;blue&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>42</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;two&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;purple&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>32</span>
      }
    }
  }
}
</code></pre></div><p>Applying the following update:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>string_val {
  value: <span style=color:#e6db74>&#34;two&#34;</span>
}
repeated {
  repeated: <span style=color:#e6db74>&#34;eight&#34;</span>
  repeated: <span style=color:#e6db74>&#34;nine&#34;</span>
}
map {
  map {
    key: <span style=color:#e6db74>&#34;five&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;orange&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>100</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;four&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;green&#34;</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;three&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;yellow&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>12</span>
      }
    }
  }
}
</code></pre></div><p>results in the updated model:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>string_val {
  value: <span style=color:#e6db74>&#34;two&#34;</span>
}
int_val {
  value: <span style=color:#ae81ff>2</span>
}
repeated {
  repeated: <span style=color:#e6db74>&#34;eight&#34;</span>
  repeated: <span style=color:#e6db74>&#34;nine&#34;</span>
}
map {
  map {
    key: <span style=color:#e6db74>&#34;five&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;orange&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>100</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;four&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;green&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>45</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;three&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;yellow&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>12</span>
      }
    }
  }
  map {
    key: <span style=color:#e6db74>&#34;two&#34;</span>
    value {
      string_val {
        value: <span style=color:#e6db74>&#34;purple&#34;</span>
      }
      int_val {
        value: <span style=color:#ae81ff>32</span>
      }
    }
  }
}
</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/cloudvision-apis/rpcs/subscribe/ title=Subscribe><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/cloudvision-apis/rpcs/delete/ title=Delete style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/cloudvision-apis/js/clipboard.min.js?1597174942></script><script src=/cloudvision-apis/js/perfect-scrollbar.min.js?1597174942></script><script src=/cloudvision-apis/js/perfect-scrollbar.jquery.min.js?1597174942></script><script src=/cloudvision-apis/js/jquery.sticky.js?1597174942></script><script src=/cloudvision-apis/js/featherlight.min.js?1597174942></script><script src=/cloudvision-apis/js/highlight.pack.js?1597174942></script><script>hljs.initHighlightingOnLoad();</script><script src=/cloudvision-apis/js/modernizr.custom-3.6.0.js?1597174942></script><script src=/cloudvision-apis/js/learn.js?1597174942></script><script src=/cloudvision-apis/js/hugo-learn.js?1597174942></script><link href=/cloudvision-apis/mermaid/mermaid.css?1597174942 rel=stylesheet><script src=/cloudvision-apis/mermaid/mermaid.js?1597174942></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>