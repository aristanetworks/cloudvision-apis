<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.126.1"><meta name=description content><link rel="shortcut icon" href=https://aristanetworks.github.io/cloudvision-apis//images/favicon.ico type=image/x-icon><title>Inventory :: Arista Networks FMP APIs</title>
<link href=/cloudvision-apis/css/nucleus.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/fontawesome-all.min.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/hybrid.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/featherlight.min.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/perfect-scrollbar.min.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/auto-complete.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/atom-one-dark-reasonable.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/theme.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/hugo-theme.css?1715886708 rel=stylesheet><link href=/cloudvision-apis/css/theme-arista.css?1715886708 rel=stylesheet><script src=/cloudvision-apis/js/jquery-3.3.1.min.js?1715886708></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/cloudvision-apis/examples/rest/inventory/><nav id=sidebar><div id=header-wrapper><div id=header><a href=https://aristanetworks.github.io/cloudvision-apis/><img src=https://aristanetworks.github.io/cloudvision-apis//images/logo_arista.png alt></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/cloudvision-apis/js/lunr.min.js?1715886708></script><script type=text/javascript src=/cloudvision-apis/js/auto-complete.js?1715886708></script><script type=text/javascript>var baseurl="https://aristanetworks.github.io/cloudvision-apis/"</script><script type=text/javascript src=/cloudvision-apis/js/search.js?1715886708></script></div><div class=highlightable><ul class=topics><li data-nav-id=/cloudvision-apis/modeling/ title=Modeling class=dd-item><a href=/cloudvision-apis/modeling/>Modeling</a></li><li data-nav-id=/cloudvision-apis/rpcs/ title="Uniform RPCs" class=dd-item><a href=/cloudvision-apis/rpcs/>Uniform RPCs</a><ul><li data-nav-id=/cloudvision-apis/rpcs/errors/ title="Error Handling" class=dd-item><a href=/cloudvision-apis/rpcs/errors/><b>- </b>Error Handling</a></li><li data-nav-id=/cloudvision-apis/rpcs/filtering/ title=Filtering class=dd-item><a href=/cloudvision-apis/rpcs/filtering/><b>- </b>Filtering</a></li><li data-nav-id=/cloudvision-apis/rpcs/getone/ title=GetOne class=dd-item><a href=/cloudvision-apis/rpcs/getone/><b>a. </b>GetOne</a></li><li data-nav-id=/cloudvision-apis/rpcs/getall/ title=GetAll class=dd-item><a href=/cloudvision-apis/rpcs/getall/><b>b. </b>GetAll</a></li><li data-nav-id=/cloudvision-apis/rpcs/subscribe/ title=Subscribe class=dd-item><a href=/cloudvision-apis/rpcs/subscribe/><b>c. </b>Subscribe</a></li><li data-nav-id=/cloudvision-apis/rpcs/set/ title=Set class=dd-item><a href=/cloudvision-apis/rpcs/set/><b>d. </b>Set</a></li><li data-nav-id=/cloudvision-apis/rpcs/delete/ title=Delete class=dd-item><a href=/cloudvision-apis/rpcs/delete/><b>e. </b>Delete</a></li></ul></li><li data-nav-id=/cloudvision-apis/connecting/ title=Connecting class=dd-item><a href=/cloudvision-apis/connecting/>Connecting</a></li><li data-nav-id=/cloudvision-apis/clients/ title=Clients class=dd-item><a href=/cloudvision-apis/clients/>Clients</a><ul><li data-nav-id=/cloudvision-apis/clients/existing/ title="Existing Clients" class=dd-item><a href=/cloudvision-apis/clients/existing/>Existing Clients</a></li><li data-nav-id=/cloudvision-apis/clients/creating/ title="Creating a Client" class=dd-item><a href=/cloudvision-apis/clients/creating/>Creating a Client</a></li></ul></li><li data-nav-id=/cloudvision-apis/examples/ title=Examples class="dd-item
parent"><a href=/cloudvision-apis/examples/>Examples</a><ul><li data-nav-id=/cloudvision-apis/examples/grpc/ title=gRPC class=dd-item><a href=/cloudvision-apis/examples/grpc/>gRPC</a></li><li data-nav-id=/cloudvision-apis/examples/rest/ title="REST API Examples" class="dd-item
parent"><a href=/cloudvision-apis/examples/rest/>REST API Examples</a><ul><li data-nav-id=/cloudvision-apis/examples/rest/bugexposure/ title=Bugexposure class=dd-item><a href=/cloudvision-apis/examples/rest/bugexposure/>Bugexposure</a></li><li data-nav-id=/cloudvision-apis/examples/rest/changecontrol/ title="Change Control" class=dd-item><a href=/cloudvision-apis/examples/rest/changecontrol/>Change Control</a></li><li data-nav-id=/cloudvision-apis/examples/rest/dashboard/ title=Dashboard class=dd-item><a href=/cloudvision-apis/examples/rest/dashboard/>Dashboard</a></li><li data-nav-id=/cloudvision-apis/examples/rest/endpointlocation/ title=Endpointlocation class=dd-item><a href=/cloudvision-apis/examples/rest/endpointlocation/>Endpointlocation</a></li><li data-nav-id=/cloudvision-apis/examples/rest/events/ title=Events class=dd-item><a href=/cloudvision-apis/examples/rest/events/>Events</a></li><li data-nav-id=/cloudvision-apis/examples/rest/inventory/ title=Inventory class="dd-item
active"><a href=/cloudvision-apis/examples/rest/inventory/>Inventory</a></li><li data-nav-id=/cloudvision-apis/examples/rest/lifecycle/ title=Lifecycle class=dd-item><a href=/cloudvision-apis/examples/rest/lifecycle/>Lifecycle</a></li><li data-nav-id=/cloudvision-apis/examples/rest/studios-and-workspaces/ title="Studios and Workspaces" class=dd-item><a href=/cloudvision-apis/examples/rest/studios-and-workspaces/>Studios and Workspaces</a></li><li data-nav-id=/cloudvision-apis/examples/rest/tag/ title=Tags class=dd-item><a href=/cloudvision-apis/examples/rest/tag/>Tags</a></li></ul></li></ul></li><li data-nav-id=/cloudvision-apis/models/ title=Models class=dd-item><a href=/cloudvision-apis/models/>Models</a><ul><li data-nav-id=/cloudvision-apis/models/alert.v1/ title=alert.v1 class=dd-item><a href=/cloudvision-apis/models/alert.v1/>alert.v1</a></li><li data-nav-id=/cloudvision-apis/models/bugexposure.v1/ title=bugexposure.v1 class=dd-item><a href=/cloudvision-apis/models/bugexposure.v1/>bugexposure.v1</a></li><li data-nav-id=/cloudvision-apis/models/changecontrol.v1/ title=changecontrol.v1 class=dd-item><a href=/cloudvision-apis/models/changecontrol.v1/>changecontrol.v1</a></li><li data-nav-id=/cloudvision-apis/models/configlet.v1/ title=configlet.v1 class=dd-item><a href=/cloudvision-apis/models/configlet.v1/>configlet.v1</a></li><li data-nav-id=/cloudvision-apis/models/configstatus.v1/ title=configstatus.v1 class=dd-item><a href=/cloudvision-apis/models/configstatus.v1/>configstatus.v1</a></li><li data-nav-id=/cloudvision-apis/models/connectivitymonitor.v1/ title=connectivitymonitor.v1 class=dd-item><a href=/cloudvision-apis/models/connectivitymonitor.v1/>connectivitymonitor.v1</a></li><li data-nav-id=/cloudvision-apis/models/dashboard.v1/ title=dashboard.v1 class=dd-item><a href=/cloudvision-apis/models/dashboard.v1/>dashboard.v1</a></li><li data-nav-id=/cloudvision-apis/models/endpointlocation.v1/ title=endpointlocation.v1 class=dd-item><a href=/cloudvision-apis/models/endpointlocation.v1/>endpointlocation.v1</a></li><li data-nav-id=/cloudvision-apis/models/event.v1/ title=event.v1 class=dd-item><a href=/cloudvision-apis/models/event.v1/>event.v1</a></li><li data-nav-id=/cloudvision-apis/models/identityprovider.v1/ title=identityprovider.v1 class=dd-item><a href=/cloudvision-apis/models/identityprovider.v1/>identityprovider.v1</a></li><li data-nav-id=/cloudvision-apis/models/imagestatus.v1/ title=imagestatus.v1 class=dd-item><a href=/cloudvision-apis/models/imagestatus.v1/>imagestatus.v1</a></li><li data-nav-id=/cloudvision-apis/models/inventory.v1/ title=inventory.v1 class=dd-item><a href=/cloudvision-apis/models/inventory.v1/>inventory.v1</a></li><li data-nav-id=/cloudvision-apis/models/lifecycle.v1/ title=lifecycle.v1 class=dd-item><a href=/cloudvision-apis/models/lifecycle.v1/>lifecycle.v1</a></li><li data-nav-id=/cloudvision-apis/models/redirector.v1/ title=redirector.v1 class=dd-item><a href=/cloudvision-apis/models/redirector.v1/>redirector.v1</a></li><li data-nav-id=/cloudvision-apis/models/serviceaccount.v1/ title=serviceaccount.v1 class=dd-item><a href=/cloudvision-apis/models/serviceaccount.v1/>serviceaccount.v1</a></li><li data-nav-id=/cloudvision-apis/models/studio.v1/ title=studio.v1 class=dd-item><a href=/cloudvision-apis/models/studio.v1/>studio.v1</a></li><li data-nav-id=/cloudvision-apis/models/tag.v1/ title=tag.v1 class=dd-item><a href=/cloudvision-apis/models/tag.v1/>tag.v1</a></li><li data-nav-id=/cloudvision-apis/models/tag.v2/ title=tag.v2 class=dd-item><a href=/cloudvision-apis/models/tag.v2/>tag.v2</a></li><li data-nav-id=/cloudvision-apis/models/workspace.v1/ title=workspace.v1 class=dd-item><a href=/cloudvision-apis/models/workspace.v1/>workspace.v1</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/aristanetworks/cloudvision-apis><i class='fab fa-github'></i> Github</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/cloudvision-apis/></a>> <a href=/cloudvision-apis/examples/>Examples</a> > <a href=/cloudvision-apis/examples/rest/>REST API Examples</a> > Inventory</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#device>Device</a><ul><li><a href=#get-device-state-by-serial-number>Get device state by serial number</a><ul><li><a href=#curl>curl</a></li></ul></li><li><a href=#get-all-devices-from-inventory>Get all devices from inventory</a><ul><li><a href=#curl-1>curl</a></li><li><a href=#cvprac>cvprac</a></li><li><a href=#python-requests>python requests</a></li></ul></li><li><a href=#decommission-a-device>Decommission a device</a><ul><li><a href=#curl-2>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-a-device>Get the decommission state of a device</a><ul><li><a href=#curl-3>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-all-devices>Get the decommission state of all devices</a><ul><li><a href=#curl-4>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-all-devices-that-failed-to-be-decommissioned>Get the decommission state of all devices that failed to be decommissioned</a><ul><li><a href=#curl-5>curl</a></li></ul></li><li><a href=#onboard-a-device>Onboard a device</a><ul><li><a href=#curl-6>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-by-request-id>Get the onboarding state by request ID</a><ul><li><a href=#curl-7>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-for-all-devices>Get the onboarding state for all devices</a><ul><li><a href=#curl-8>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-for-all-devices-and-filter-by-status>Get the onboarding state for all devices and filter by status</a><ul><li><a href=#curl-9>curl</a></li></ul></li><li><a href=#get-the-provisioning-state-for-devices-in-ztp-mode>Get the provisioning state for devices in ZTP mode</a><ul><li><a href=#curl-10>curl</a></li></ul></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Inventory</h1><nav id=TableOfContents><ul><li><a href=#device>Device</a><ul><li><a href=#get-device-state-by-serial-number>Get device state by serial number</a><ul><li><a href=#curl>curl</a></li></ul></li><li><a href=#get-all-devices-from-inventory>Get all devices from inventory</a><ul><li><a href=#curl-1>curl</a></li><li><a href=#cvprac>cvprac</a></li><li><a href=#python-requests>python requests</a></li></ul></li><li><a href=#decommission-a-device>Decommission a device</a><ul><li><a href=#curl-2>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-a-device>Get the decommission state of a device</a><ul><li><a href=#curl-3>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-all-devices>Get the decommission state of all devices</a><ul><li><a href=#curl-4>curl</a></li></ul></li><li><a href=#get-the-decommission-state-of-all-devices-that-failed-to-be-decommissioned>Get the decommission state of all devices that failed to be decommissioned</a><ul><li><a href=#curl-5>curl</a></li></ul></li><li><a href=#onboard-a-device>Onboard a device</a><ul><li><a href=#curl-6>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-by-request-id>Get the onboarding state by request ID</a><ul><li><a href=#curl-7>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-for-all-devices>Get the onboarding state for all devices</a><ul><li><a href=#curl-8>curl</a></li></ul></li><li><a href=#get-the-onboarding-state-for-all-devices-and-filter-by-status>Get the onboarding state for all devices and filter by status</a><ul><li><a href=#curl-9>curl</a></li></ul></li><li><a href=#get-the-provisioning-state-for-devices-in-ztp-mode>Get the provisioning state for devices in ZTP mode</a><ul><li><a href=#curl-10>curl</a></li></ul></li></ul></li></ul></nav><div class="notices tip"><p>To generate a service account token please refer to the <a href=../../../connecting/#token-based-authentication>authentication</a> chapter.</p></div><div class="notices tip"><p><a href=https://stedolan.github.io/jq/>jq</a> can be used to easily format and parse the outputs.</p></div><h1 id=device>Device</h1><h2 id=get-device-state-by-serial-number>Get device state by serial number</h2><h3 id=curl>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/Device?key.deviceId=BAD032986065E8DC14CBB6472EC314A6&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;BAD032986065E8DC14CBB6472EC314A6&#34;</span>}, <span style=color:#f92672>&#34;softwareVersion&#34;</span>:<span style=color:#e6db74>&#34;4.27.0F&#34;</span>, <span style=color:#f92672>&#34;modelName&#34;</span>:<span style=color:#e6db74>&#34;vEOS-lab&#34;</span>, <span style=color:#f92672>&#34;hardwareRevision&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#f92672>&#34;fqdn&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf1&#34;</span>, <span style=color:#f92672>&#34;hostname&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf1&#34;</span>, <span style=color:#f92672>&#34;domainName&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#f92672>&#34;systemMacAddress&#34;</span>:<span style=color:#e6db74>&#34;50:08:00:a7:ca:c3&#34;</span>, <span style=color:#f92672>&#34;bootTime&#34;</span>:<span style=color:#e6db74>&#34;2021-12-01T20:06:18.607800006Z&#34;</span>, <span style=color:#f92672>&#34;streamingStatus&#34;</span>:<span style=color:#e6db74>&#34;STREAMING_STATUS_ACTIVE&#34;</span>, <span style=color:#f92672>&#34;extendedAttributes&#34;</span>:{<span style=color:#f92672>&#34;featureEnabled&#34;</span>:{<span style=color:#f92672>&#34;Danz&#34;</span>:<span style=color:#66d9ef>false</span>, <span style=color:#f92672>&#34;Mlag&#34;</span>:<span style=color:#66d9ef>false</span>}}}, <span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-03T10:04:38.376359403Z&#34;</span>}<span style=color:#960050;background-color:#1e0010>%</span>
</span></span></code></pre></div><h2 id=get-all-devices-from-inventory>Get all devices from inventory</h2><h3 id=curl-1>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/Device/all&#39;</span> | jq <span style=color:#e6db74>&#39;.result.value | with_entries(select(.[])) | select(.streamingStatus==&#34;STREAMING_STATUS_ACTIVE&#34;) | .hostname&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;cd263&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;sn413&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;fm422&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;sn503&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;psp301&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;wl504&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;cloudEOS1&#34;</span>
</span></span></code></pre></div><p>We can use <code>POST</code> and <code>partialEqFilter</code> to get more specific data, e.g.: to get all actively streaming devices we can filter by <code>streamingStatus</code> by setting the <code>"STREAMING_STATUS_ACTIVE"</code> or <code>2</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/Device/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;: [{&#34;streamingStatus&#34;:2}]}&#39;</span>
</span></span></code></pre></div><p>Get all actively streaming devices that are running on EOS 4.27.0F:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/Device/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;: [{&#34;streamingStatus&#34;:2, &#34;softwareVersion&#34;:&#34;4.27.0F&#34;}]}&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;6323DA7D2B542B5D09630F87351BEA41&#34;</span>},<span style=color:#f92672>&#34;softwareVersion&#34;</span>:<span style=color:#e6db74>&#34;4.27.0F&#34;</span>,<span style=color:#f92672>&#34;modelName&#34;</span>:<span style=color:#e6db74>&#34;vEOS-lab&#34;</span>,<span style=color:#f92672>&#34;hardwareRevision&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;fqdn&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf4&#34;</span>,<span style=color:#f92672>&#34;hostname&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf4&#34;</span>,<span style=color:#f92672>&#34;domainName&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;systemMacAddress&#34;</span>:<span style=color:#e6db74>&#34;50:08:00:25:9d:36&#34;</span>,<span style=color:#f92672>&#34;bootTime&#34;</span>:<span style=color:#e6db74>&#34;2021-10-20T17:44:35.621819972Z&#34;</span>,<span style=color:#f92672>&#34;streamingStatus&#34;</span>:<span style=color:#e6db74>&#34;STREAMING_STATUS_ACTIVE&#34;</span>,<span style=color:#f92672>&#34;extendedAttributes&#34;</span>:{<span style=color:#f92672>&#34;featureEnabled&#34;</span>:{<span style=color:#f92672>&#34;Danz&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;Mlag&#34;</span>:<span style=color:#66d9ef>false</span>}}},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-01-27T22:33:58.745524517Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;BAD032986065E8DC14CBB6472EC314A6&#34;</span>},<span style=color:#f92672>&#34;softwareVersion&#34;</span>:<span style=color:#e6db74>&#34;4.27.0F&#34;</span>,<span style=color:#f92672>&#34;modelName&#34;</span>:<span style=color:#e6db74>&#34;vEOS-lab&#34;</span>,<span style=color:#f92672>&#34;hardwareRevision&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;fqdn&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf1&#34;</span>,<span style=color:#f92672>&#34;hostname&#34;</span>:<span style=color:#e6db74>&#34;tp-avd-leaf1&#34;</span>,<span style=color:#f92672>&#34;domainName&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;systemMacAddress&#34;</span>:<span style=color:#e6db74>&#34;50:08:00:a7:ca:c3&#34;</span>,<span style=color:#f92672>&#34;bootTime&#34;</span>:<span style=color:#e6db74>&#34;2021-12-01T20:06:18.607800006Z&#34;</span>,<span style=color:#f92672>&#34;streamingStatus&#34;</span>:<span style=color:#e6db74>&#34;STREAMING_STATUS_ACTIVE&#34;</span>,<span style=color:#f92672>&#34;extendedAttributes&#34;</span>:{<span style=color:#f92672>&#34;featureEnabled&#34;</span>:{<span style=color:#f92672>&#34;Danz&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;Mlag&#34;</span>:<span style=color:#66d9ef>false</span>}}},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-03T10:04:38.376359403Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><h3 id=cvprac>cvprac</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_active_devices</span>(client):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39; Get active devices &#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    dev_url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/api/resources/inventory/v1/Device/all&#39;</span>
</span></span><span style=display:flex><span>    devices_data <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get(dev_url)
</span></span><span style=display:flex><span>    devices <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> device <span style=color:#f92672>in</span> devices_data[<span style=color:#e6db74>&#39;data&#39;</span>]:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> device[<span style=color:#e6db74>&#39;result&#39;</span>][<span style=color:#e6db74>&#39;value&#39;</span>][<span style=color:#e6db74>&#39;streamingStatus&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;STREAMING_STATUS_ACTIVE&#34;</span>:
</span></span><span style=display:flex><span>                devices<span style=color:#f92672>.</span>append(device[<span style=color:#e6db74>&#39;result&#39;</span>][<span style=color:#e6db74>&#39;value&#39;</span>][<span style=color:#e6db74>&#39;hostname&#39;</span>])
</span></span><span style=display:flex><span>        <span style=color:#75715e># pass on archived datasets</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>KeyError</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> devices
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(get_active_devices(clnt))
</span></span></code></pre></div><h3 id=python-requests>python requests</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> json <span style=color:#f92672>import</span> JSONDecoder, JSONDecodeError
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>json_decoder</span>(data):
</span></span><span style=display:flex><span>    decoder <span style=color:#f92672>=</span> JSONDecoder()
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            o, pos <span style=color:#f92672>=</span> decoder<span style=color:#f92672>.</span>raw_decode(data, pos)
</span></span><span style=display:flex><span>            result<span style=color:#f92672>.</span>append(o)
</span></span><span style=display:flex><span>            pos <span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> JSONDecodeError:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_active_devices</span>():
</span></span><span style=display:flex><span>    dev_url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/api/resources/inventory/v1/Device/all&#39;</span>
</span></span><span style=display:flex><span>    url <span style=color:#f92672>=</span> cvp_url <span style=color:#f92672>+</span> dev_url
</span></span><span style=display:flex><span>    head <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;Authorization&#39;</span>: <span style=color:#e6db74>&#39;Bearer </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(token)}
</span></span><span style=display:flex><span>    response <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(url, headers<span style=color:#f92672>=</span>head, verify<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>    devices_data <span style=color:#f92672>=</span> json_decoder(response<span style=color:#f92672>.</span>text)
</span></span><span style=display:flex><span>    devices <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> device <span style=color:#f92672>in</span> devices_data:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> device[<span style=color:#e6db74>&#39;result&#39;</span>][<span style=color:#e6db74>&#39;value&#39;</span>][<span style=color:#e6db74>&#39;streamingStatus&#39;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;STREAMING_STATUS_ACTIVE&#34;</span>:
</span></span><span style=display:flex><span>                devices<span style=color:#f92672>.</span>append(device[<span style=color:#e6db74>&#39;result&#39;</span>][<span style=color:#e6db74>&#39;value&#39;</span>][<span style=color:#e6db74>&#39;hostname&#39;</span>])
</span></span><span style=display:flex><span>        <span style=color:#75715e># pass on archived datasets</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>KeyError</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> devices
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(get_active_devices())
</span></span></code></pre></div><h5 id=sample-output>Sample output</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 resource_native.py
</span></span><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#e6db74>&#39;cd263&#39;</span>, <span style=color:#e6db74>&#39;sn413&#39;</span>, <span style=color:#e6db74>&#39;fm422&#39;</span>, <span style=color:#e6db74>&#39;sn503&#39;</span>, <span style=color:#e6db74>&#39;psp301&#39;</span>, <span style=color:#e6db74>&#39;wl504&#39;</span>, <span style=color:#e6db74>&#39;cloudEOS1&#39;</span><span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=decommission-a-device>Decommission a device</h2><h3 id=curl-2>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceDecommissioningConfig&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;key&#34;:{&#34;request_id&#34;:&#34;123456789&#34;},&#34;device_id&#34;: &#34;0123F2E4462997EB155B7C50EC148767&#34;}&#39;</span>
</span></span></code></pre></div><h2 id=get-the-decommission-state-of-a-device>Get the decommission state of a device</h2><h3 id=curl-3>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceDecommissioning?key.requestId=123456789&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;123456789&#34;</span>}, <span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;DECOMMISSIONING_STATUS_IN_PROGRESS&#34;</span>, <span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Disabled TerminAttr, waiting for device to be marked inactive&#34;</span>}, <span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T00:40:24.893100195Z&#34;</span>}
</span></span></code></pre></div><h2 id=get-the-decommission-state-of-all-devices>Get the decommission state of all devices</h2><h3 id=curl-4>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceDecommissioning/all&#39;</span>
</span></span></code></pre></div><h2 id=get-the-decommission-state-of-all-devices-that-failed-to-be-decommissioned>Get the decommission state of all devices that failed to be decommissioned</h2><h3 id=curl-5>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceDecommissioning/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;: [ {&#34;status&#34;:2}]}&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;2337d655-b1e5-4003-9325-beff8c9e7f4a&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;DECOMMISSIONING_STATUS_FAILURE&#34;</span>,<span style=color:#f92672>&#34;error&#34;</span>:<span style=color:#e6db74>&#34;Timed out waiting for device BAD032986065E8DC14CBB6472EC314A6 status to be inactive&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:41:49.566294590Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;7802d5a5-040d-4d86-805f-d63891256201&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;DECOMMISSIONING_STATUS_FAILURE&#34;</span>,<span style=color:#f92672>&#34;error&#34;</span>:<span style=color:#e6db74>&#34;Pending/In-progress tasks exist for the device&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:41:49.566299871Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;d88b046f-3338-450f-bf47-a28f6ced700e&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;DECOMMISSIONING_STATUS_FAILURE&#34;</span>,<span style=color:#f92672>&#34;error&#34;</span>:<span style=color:#e6db74>&#34;Pending/In-progress tasks exist for the device&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:41:49.566304560Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><p>or get the state of decommissioning for devices for which the decommissioning is still in progress:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceDecommissioning/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;: [ {&#34;status&#34;:1}]}&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;123456789&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;DECOMMISSIONING_STATUS_IN_PROGRESS&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Disabled TerminAttr, waiting for device to be marked inactive&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:41:46.376310308Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><h2 id=onboard-a-device>Onboard a device</h2><div class="notices note"><p>The service account&rsquo;s name has to match the username logged in on the CVP UI and that same username has to be allowed on the device.
The user should be logged in on the UI when using the the DeviceOnboarding APIs.</p></div><h3 id=curl-6>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceOnboardingConfig&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;key&#34;:{&#34;requestId&#34;:&#34;133713371337&#34;},&#34;hostnameOrIp&#34;:&#34;192.0.2.139&#34;,&#34;device_type&#34;:&#34;eos&#34;}&#39;</span>
</span></span></code></pre></div><h2 id=get-the-onboarding-state-by-request-id>Get the onboarding state by request ID</h2><h3 id=curl-7>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceOnboarding?key.requestId=133713371337&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;133713371337&#34;</span>}, <span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;ZZZ9999999&#34;</span>, <span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;ONBOARDING_STATUS_SUCCESS&#34;</span>, <span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Device onboarded successfully&#34;</span>}, <span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:51:13.447185558Z&#34;</span>}
</span></span></code></pre></div><h2 id=get-the-onboarding-state-for-all-devices>Get the onboarding state for all devices</h2><h3 id=curl-8>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceOnboarding/all&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;133713371337&#34;</span>},<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;ZZZ9999999&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;ONBOARDING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Device onboarded successfully&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:51:13.447185558Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><h2 id=get-the-onboarding-state-for-all-devices-and-filter-by-status>Get the onboarding state for all devices and filter by status</h2><h3 id=curl-9>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX GET --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/DeviceOnboarding/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;:[{&#34;status&#34;:&#34;ONBOARDING_STATUS_SUCCESS&#34;}]}&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;133713371337&#34;</span>},<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;ZZZ7654321&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;ONBOARDING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Device onboarded successfully&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:51:13.447185558Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;1337133713381123&#34;</span>},<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;ZZZ1234567&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;ONBOARDING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Device onboarded successfully&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T22:46:33.709449980Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;requestId&#34;</span>:<span style=color:#e6db74>&#34;0342271e-19e0-4672-9d09-85acd7a427b5&#34;</span>},<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;6323DA7D2B542B5D09630F87351BEA41&#34;</span>,<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;ONBOARDING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;statusMessage&#34;</span>:<span style=color:#e6db74>&#34;Device onboarded successfully&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-07-11T15:19:22.293390239Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><h2 id=get-the-provisioning-state-for-devices-in-ztp-mode>Get the provisioning state for devices in ZTP mode</h2><h3 id=curl-10>curl</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -sS -kX POST --header <span style=color:#e6db74>&#39;Accept: application/json&#39;</span> -b access_token<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat token.tok<span style=color:#e6db74>`</span> <span style=color:#e6db74>&#39;https://192.0.2.100/api/resources/inventory/v1/ProvisionedDevice/all&#39;</span> -d <span style=color:#e6db74>&#39;{&#34;partialEqFilter&#34;:[{&#34;ztpMode&#34;:true}]}&#39;</span>
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;JPE15214224&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;PROVISIONING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;ztpMode&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;ipAddress&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;192.0.2.240&#34;</span>},<span style=color:#f92672>&#34;provisioningGroupName&#34;</span>:<span style=color:#e6db74>&#34;undefined_container&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-01-31T13:16:09.885Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;JPE19050707&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;PROVISIONING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;ztpMode&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;ipAddress&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;192.0.2.121&#34;</span>},<span style=color:#f92672>&#34;provisioningGroupName&#34;</span>:<span style=color:#e6db74>&#34;undefined_container&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-01-30T19:06:00.070338261Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;JPE16401934&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;PROVISIONING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;ztpMode&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;ipAddress&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;192.0.2.254&#34;</span>},<span style=color:#f92672>&#34;provisioningGroupName&#34;</span>:<span style=color:#e6db74>&#34;undefined_container&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:48:14.187Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;result&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:{<span style=color:#f92672>&#34;key&#34;</span>:{<span style=color:#f92672>&#34;deviceId&#34;</span>:<span style=color:#e6db74>&#34;JPE15064123&#34;</span>},<span style=color:#f92672>&#34;status&#34;</span>:<span style=color:#e6db74>&#34;PROVISIONING_STATUS_SUCCESS&#34;</span>,<span style=color:#f92672>&#34;ztpMode&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;ipAddress&#34;</span>:{<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;192.0.2.250&#34;</span>},<span style=color:#f92672>&#34;provisioningGroupName&#34;</span>:<span style=color:#e6db74>&#34;undefined_container&#34;</span>},<span style=color:#f92672>&#34;time&#34;</span>:<span style=color:#e6db74>&#34;2022-02-04T19:53:13.016Z&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;INITIAL&#34;</span>}}
</span></span></code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/cloudvision-apis/examples/rest/events/ title=Events><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/cloudvision-apis/examples/rest/lifecycle/ title=Lifecycle style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/cloudvision-apis/js/clipboard.min.js?1715886708></script><script src=/cloudvision-apis/js/perfect-scrollbar.min.js?1715886708></script><script src=/cloudvision-apis/js/perfect-scrollbar.jquery.min.js?1715886708></script><script src=/cloudvision-apis/js/jquery.sticky.js?1715886708></script><script src=/cloudvision-apis/js/featherlight.min.js?1715886708></script><script src=/cloudvision-apis/js/highlight.pack.js?1715886708></script><script>hljs.initHighlightingOnLoad()</script><script src=/cloudvision-apis/js/modernizr.custom-3.6.0.js?1715886708></script><script src=/cloudvision-apis/js/learn.js?1715886708></script><script src=/cloudvision-apis/js/hugo-learn.js?1715886708></script><link href=/cloudvision-apis/mermaid/mermaid.css?1715886708 rel=stylesheet><script src=/cloudvision-apis/mermaid/mermaid.js?1715886708></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>